# 운영체제(OS)

## 동기화란?

**동기(synchronous : 동시에 일어나는)**

 ![동기](./synchronous) 

동기는 말 그대로 동시에 일어난다는 뜻, 요청과 그 결과가 동시에 일어난다

* 요청과 결과가 한 자리에서 동시에 일어남
* A노드와 B노드 사이의 작업 처리 단위(transaction)를 동시에 맞추겠다.
* 설계가 매우 간단하고 직관적이지만 결과가 주어질 때까지 아무것도 못하고 대기해야 하는 단점이 있다.
*  값이 반환되기 전까지는 `blocking`되어 있다는 것을 의미 



**비동기(Asynchronous : 동시에 일어나지 않는)**

 ![비동기](./asynchronous)[]() 

 비동기는 동시에 일어나지 않는다를 의미, 요청과 결과가 동시에 일어나지 않을거라는 약속입니다. 

* 요청한 그 자리에서 결과가 주어지지 않음
* 노드 사이의 작업 처리 단위를 동시에 맞추지 않아도 된다.
* 동기보다 복잡하지만 결과가 주어지는데 시간이 걸리더라도 그 시간 동안 다른 작업을 할 수 있으므로 자원을 효율적으로 사용할 수 있는 장점이 있다.
*  `blocking`되지 않고 이벤트 큐에 넣거나 백그라운드 스레드에게 해당 task 를 위임하고 바로 다음 코드를 실행하기 때문에 기대되는 값이 바로 반환되지 않는다. 

## 프로세스 동기화

1. 임계영역(Critical Section)

   동일한 자원을 동시에 접근하는 작업(e.g. 공유하는 변수 사용, 동일 파일을 사용하는 등)을 실행하는 코드 영역을 Critical Section 이라 칭한다.

   한순간 반드시 프로세스 하나만 진입해야 하는데, 이때 임계자원을 이용하는 부분으로 공유자원의 독점을 보장

2. 임계영역 문제

   프로세스들이 임계영역을 함께 쓸수 있도록 하는 문제

   * 상호 배제(Mutual Exclusion) : 임계영역에 프로세스가 실행중이면 다른 프로세스는 접근 불가
   * 진행(Progress) : 임계영역에 프로세스가 실행중이지 않으면 항상 접근 가능
   * 한정된 대기(Bounded Waiting) :  진입 신청 후 부터 받아들여질 때가지, 다른 프로세스들이 Critical Section 에 진입하는 횟수는 제한이 있어야 한다 => starvation 방지

3. Lock

   하드웨어 기반 해결책으로써, 동시에 공유 자원에 접근하는 것을 막기 위해 Critical Section 에 진입하는 프로세스는 Lock 을 획득하고 Critical Section 을 빠져나올 때, Lock 을 방출함으로써 동시에 접근이 되지 않도록 한다. 

   1. 세마포어(Semaphores)

       세마포어는 동시에 리소스에 접근할 수 있는 '허용 가능한 Counter의 갯수'를 가지고 있는 Counter

       **가용한 개수를 가진 자원** 에 대한 접근 제어용으로 사용되며, 세마포어는 그 가용한 **자원의 개수** 로 초기화 

      사용하면 세마포어 감소 방출하면 세마 포어가 증가한다.

   2. 뮤텍스(Mutex)

      상호 배제의 약자 0또는 1의 값을 가지는 이진 세마포어

      임계영역을 가진 스레드들의 실행시간을 겹치지 않게 단독으로 실행하게 하는 기술

   3. 모니터(Moniter)

      고급 언어(JAVA)의 설계 구조물로서, 개발자의 코드를 상호배제 하게끔 만든 추상화된 데이터 형태 

      공유자원에 접근하기 위한 키 획득과 자원 사용 후 해제를 모두 처리한다. (세마포어는 직접 키 해제와 공유자원 접근 처리가 필요하다. 

      모니터는 이러한 일들이 캡슐화되어있어서(encapsulation) 개발자는 카운터값을 1로 주냐 0으로 주냐 고민할 필요 없이 synchronized, wait(), notify() 등의 키워드를 이용해 좀 더 편하게 동기화 가능( 세마포어에 비해서 모니터 쪽이 공유자원에 접근할 수 있는 키의 획득과 해제를 모두 처리해서 간단하다. 세마포어는 직접 키해제와 공유자원 접근 처리를 해주어야한다)

      

      